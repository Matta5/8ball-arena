@model BLL.DTOs.UserDTO

@{
    ViewData["Title"] = "Create";
}

<h2>Create New User</h2>

@using (Html.BeginForm("Create", "User", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="form-group">
        @Html.LabelFor(model => model.Username)
        @Html.EditorFor(model => model.Username, new { htmlAttributes = new { @class = "form-control" } })
        @Html.ValidationMessageFor(model => model.Username, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.Email)
        @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
        @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
    </div>

    <div class="form-group">
        @Html.LabelFor(model => model.Password)
        @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @class = "form-control" } })
        @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
        @if (ViewBag.PasswordError != null)
        {
            <div style="color:red;">@ViewBag.PasswordError</div>
        }
    </div>

    <div class="form-group">
        @Html.Label("Profile Picture")
        <input type="file" name="profilePicture" id="profilePicture" onchange="loadFile(event)" />
        <img id="preview" width="200" />
        @if (ViewBag.FileError != null)
		{
			<div style="color:red;">@ViewBag.FileError</div>
		}
    </div>

    <script>
        var loadFile = function (event) {
            var output = document.getElementById('preview');
            output.src = URL.createObjectURL(event.target.files[0]);
            output.onload = function () {
                URL.revokeObjectURL(output.src) // free memory
            }
        };
    </script>

    <button type="submit" class="btn btn-primary">Create</button>




}