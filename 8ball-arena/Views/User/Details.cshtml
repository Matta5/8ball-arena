@model _8ball_arena.Models.UserViewModel

@{
    ViewData["Title"] = "Account";

    var sessionId = ViewBag.SessionId as int?;
}

<h1>Account Details</h1>

<div>
    <img src="@Model.ProfilePicture" alt="Profile Picture" style="max-width: 100px;" />
    <p><strong>Username:</strong> @Model.Username</p>
    <p><strong>Wins:</strong> @Model.Wins</p>
    <p><strong>Rating:</strong> @Model.Rating</p>
    <p><strong>Games Played:</strong> @Model.GamesPlayed</p>
    <p><strong>Date Joined:</strong> @Model.DateJoined.ToString("yyyy-MM-dd")</p>
    <br />
</div>

<hr />

<h2>Active Duels</h2>
@if (Model.ActiveDuels.Any())
{
    <ul>
        @foreach (var duel in Model.ActiveDuels)
        {
                <br />
                <strong>Duel ID:</strong> @duel.Id <br />
                <strong>Created On:</strong> @duel.DateCreated.ToString("yyyy-MM-dd HH:mm")
                <br />
                <h4>Participants:</h4>
                      @foreach (var participant in duel.Participants)
					  {
						  <li>
							  @participant.Username
						  </li>
					  }
                
        }
    </ul>
}
else
{
    <p>No active duels.</p>
}

<h2>Completed Duels</h2>
@if (Model.CompletedDuels.Any())
{
        @foreach (var duel in Model.CompletedDuels)
        {
                
                <strong>Duel ID:</strong> @duel.Id <br />
                <strong>Completed On:</strong> @duel.DateCreated.ToString("yyyy-MM-dd HH:mm")
                <br />
                <h4>Participants:</h4>
                <ul>
                    @foreach (var participant in duel.Participants)
                    {
                        <li>
                            @if (participant.IsWinner.HasValue)
                            {
                                @if (participant.IsWinner.Value)
                                {
                                    <span>@participant.Username Winner</span>
                                }
                                else
                                {
                                    <span>@participant.Username Loser</span>
                                }
                            }
                            <br />
                        </li>
                    }
                </ul>
           
        }
}
else
{
    <p>No completed duels.</p>
}
